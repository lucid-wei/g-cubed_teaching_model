<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>gcubed.model API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>gcubed.model</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># ------------------------------------------------------------------
# Purpose: This class defines the state of the model, at all
# points from data loading to simulation analysis.
# Author: Geoff Shuetrim
#
# Ensure that the current working directory
# is the base directory of the G-cubed model.
# ------------------------------------------------------------------
from __future__ import annotations
import importlib
import logging
import pandas as pd
from gcubed.baseline.energy_usage_efficiency import EnergyUsageEfficiency
from gcubed.model_configuration import ModelConfiguration
from gcubed.baseline.effective_labour_productivity import EffectiveLabourProductivity
from gcubed.sym_data import SymData
from gcubed.data.database import Database
from gcubed.model_parameters.parameters import Parameters
from gcubed.base import Base

class Model(Base):
    &#34;&#34;&#34;
    Encapsulates all of the information about the state of a Model.

    Properties:

        configuration: The model configuration.

        sym_data: The data provided by SYM about variables and parameters

        io_data: The Input/Output table data for each region.

        parameters: the information from setparameters.csv, stored
        as a dictionary of data frames, keyed by parameter name and with the
        dataframe being the grid of parameter values associated with
        that parameter name, as specified in the file of user-specified
        parameter values. Note that the keys in this dictionary match the
        parameter names in the list of parameter names read in from the
        varmap file generated by SYM processing. When populating the vector of
        parameter values, each dataframe in parameters needs to be vectorised by
        stacking the transposed rows of the dataframe. The vectorising can be
        done using the Numpy flatten method df.to_numpy().flatten().
        Then convert back to a dataframe and transpose it using
        pd.DataFrame(vector).transpose().

        intcon: The interest rate variable values in the calibration year, adjusted for r0,
        along with the value of r0 that was used.

        TODO: Complete this listing of class properties and their explanations.
        _database: the dataframe containing the annual data for all variables.

        previous_model: the previous model, in a rolling sequence of models.

        next_model: the next model in a rolling sequence of models.

        The next and previous model properties form a doubly-linked list of
        models that can be used to perform rolling model evaluations as required
        for the CPD project.

    &#34;&#34;&#34;

    def initialise_properties(self):
        self._configuration: ModelConfiguration = None
        self._sym_data: SymData = None
        self._parameters: Parameters = None
        self._previous_model: Model = None
        self._next_model: Model = None
        self._variables: pd.DataFrame = None
        self._database: pd.DataFrame = None
        self._shock_variables: pd.DataFrame = None
        self._shock_database: pd.DataFrame = None

    def __init__(self, configuration: ModelConfiguration) -&gt; None:
        &#34;&#34;&#34;
        Arguments:
        configuration: either the string file name 
        for a Model Configuration file or a ModelConfiguration.
        &#34;&#34;&#34;
        self.initialise_properties()
        self._configuration = configuration

        self._sym_data = SymData(configuration=self.configuration)

        self._database = Database(sym_data=self.sym_data)

        # Use the parameters class associated with the model version and number being run
        version: str = self.configuration.version
        number: int = self.configuration.number
        module = importlib.import_module(f&#34;gcubed.model_parameters.{version}.parameters_{version}_{number}&#34;)
        parameters_class: Parameters = getattr(module, f&#34;Parameters{version}{number}&#34;)
        self._parameters = parameters_class(database=self.database, base_year=self.configuration.calibration_year)

        self._effective_productivity = EffectiveLabourProductivity(parameters=self.parameters)

        self._energy_usage_efficiency = EnergyUsageEfficiency(sym_data=self.sym_data)

        self.__validate()

        logging.info(&#34;The model has been loaded.&#34;)

    @property
    def configuration(self) -&gt; ModelConfiguration:
        return self._configuration

    @property
    def sym_data(self) -&gt; SymData:
        return self._sym_data

    @property
    def database(self) -&gt; Database:
        return self._database

    @property
    def parameters(self) -&gt; Parameters:
        return self._parameters

    @property
    def effective_labour_productivity(self) -&gt; EffectiveLabourProductivity:
        return self._effective_productivity

    @property
    def energy_usage_efficiency(self) -&gt; EnergyUsageEfficiency:
        return self._energy_usage_efficiency

    def __validate(self):
        &#34;&#34;&#34;
        Raise an exception if the model is invalid
        &#34;&#34;&#34;
        pass</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="gcubed.model.Model"><code class="flex name class">
<span>class <span class="ident">Model</span></span>
<span>(</span><span>configuration: ModelConfiguration)</span>
</code></dt>
<dd>
<div class="desc"><p>Encapsulates all of the information about the state of a Model.</p>
<h2 id="properties">Properties</h2>
<p>configuration: The model configuration.</p>
<p>sym_data: The data provided by SYM about variables and parameters</p>
<p>io_data: The Input/Output table data for each region.</p>
<p>parameters: the information from setparameters.csv, stored
as a dictionary of data frames, keyed by parameter name and with the
dataframe being the grid of parameter values associated with
that parameter name, as specified in the file of user-specified
parameter values. Note that the keys in this dictionary match the
parameter names in the list of parameter names read in from the
varmap file generated by SYM processing. When populating the vector of
parameter values, each dataframe in parameters needs to be vectorised by
stacking the transposed rows of the dataframe. The vectorising can be
done using the Numpy flatten method df.to_numpy().flatten().
Then convert back to a dataframe and transpose it using
pd.DataFrame(vector).transpose().</p>
<p>intcon: The interest rate variable values in the calibration year, adjusted for r0,
along with the value of r0 that was used.</p>
<p>TODO: Complete this listing of class properties and their explanations.
_database: the dataframe containing the annual data for all variables.</p>
<p>previous_model: the previous model, in a rolling sequence of models.</p>
<p>next_model: the next model in a rolling sequence of models.</p>
<p>The next and previous model properties form a doubly-linked list of
models that can be used to perform rolling model evaluations as required
for the CPD project.</p>
<p>Arguments:
configuration: either the string file name
for a Model Configuration file or a ModelConfiguration.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Model(Base):
    &#34;&#34;&#34;
    Encapsulates all of the information about the state of a Model.

    Properties:

        configuration: The model configuration.

        sym_data: The data provided by SYM about variables and parameters

        io_data: The Input/Output table data for each region.

        parameters: the information from setparameters.csv, stored
        as a dictionary of data frames, keyed by parameter name and with the
        dataframe being the grid of parameter values associated with
        that parameter name, as specified in the file of user-specified
        parameter values. Note that the keys in this dictionary match the
        parameter names in the list of parameter names read in from the
        varmap file generated by SYM processing. When populating the vector of
        parameter values, each dataframe in parameters needs to be vectorised by
        stacking the transposed rows of the dataframe. The vectorising can be
        done using the Numpy flatten method df.to_numpy().flatten().
        Then convert back to a dataframe and transpose it using
        pd.DataFrame(vector).transpose().

        intcon: The interest rate variable values in the calibration year, adjusted for r0,
        along with the value of r0 that was used.

        TODO: Complete this listing of class properties and their explanations.
        _database: the dataframe containing the annual data for all variables.

        previous_model: the previous model, in a rolling sequence of models.

        next_model: the next model in a rolling sequence of models.

        The next and previous model properties form a doubly-linked list of
        models that can be used to perform rolling model evaluations as required
        for the CPD project.

    &#34;&#34;&#34;

    def initialise_properties(self):
        self._configuration: ModelConfiguration = None
        self._sym_data: SymData = None
        self._parameters: Parameters = None
        self._previous_model: Model = None
        self._next_model: Model = None
        self._variables: pd.DataFrame = None
        self._database: pd.DataFrame = None
        self._shock_variables: pd.DataFrame = None
        self._shock_database: pd.DataFrame = None

    def __init__(self, configuration: ModelConfiguration) -&gt; None:
        &#34;&#34;&#34;
        Arguments:
        configuration: either the string file name 
        for a Model Configuration file or a ModelConfiguration.
        &#34;&#34;&#34;
        self.initialise_properties()
        self._configuration = configuration

        self._sym_data = SymData(configuration=self.configuration)

        self._database = Database(sym_data=self.sym_data)

        # Use the parameters class associated with the model version and number being run
        version: str = self.configuration.version
        number: int = self.configuration.number
        module = importlib.import_module(f&#34;gcubed.model_parameters.{version}.parameters_{version}_{number}&#34;)
        parameters_class: Parameters = getattr(module, f&#34;Parameters{version}{number}&#34;)
        self._parameters = parameters_class(database=self.database, base_year=self.configuration.calibration_year)

        self._effective_productivity = EffectiveLabourProductivity(parameters=self.parameters)

        self._energy_usage_efficiency = EnergyUsageEfficiency(sym_data=self.sym_data)

        self.__validate()

        logging.info(&#34;The model has been loaded.&#34;)

    @property
    def configuration(self) -&gt; ModelConfiguration:
        return self._configuration

    @property
    def sym_data(self) -&gt; SymData:
        return self._sym_data

    @property
    def database(self) -&gt; Database:
        return self._database

    @property
    def parameters(self) -&gt; Parameters:
        return self._parameters

    @property
    def effective_labour_productivity(self) -&gt; EffectiveLabourProductivity:
        return self._effective_productivity

    @property
    def energy_usage_efficiency(self) -&gt; EnergyUsageEfficiency:
        return self._energy_usage_efficiency

    def __validate(self):
        &#34;&#34;&#34;
        Raise an exception if the model is invalid
        &#34;&#34;&#34;
        pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="gcubed.base.Base" href="base.html#gcubed.base.Base">Base</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="gcubed.model.Model.configuration"><code class="name">var <span class="ident">configuration</span> : <a title="gcubed.model_configuration.ModelConfiguration" href="model_configuration.html#gcubed.model_configuration.ModelConfiguration">ModelConfiguration</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def configuration(self) -&gt; ModelConfiguration:
    return self._configuration</code></pre>
</details>
</dd>
<dt id="gcubed.model.Model.database"><code class="name">var <span class="ident">database</span> : <a title="gcubed.data.database.Database" href="data/database.html#gcubed.data.database.Database">Database</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def database(self) -&gt; Database:
    return self._database</code></pre>
</details>
</dd>
<dt id="gcubed.model.Model.effective_labour_productivity"><code class="name">var <span class="ident">effective_labour_productivity</span> : <a title="gcubed.baseline.effective_labour_productivity.EffectiveLabourProductivity" href="baseline/effective_labour_productivity.html#gcubed.baseline.effective_labour_productivity.EffectiveLabourProductivity">EffectiveLabourProductivity</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def effective_labour_productivity(self) -&gt; EffectiveLabourProductivity:
    return self._effective_productivity</code></pre>
</details>
</dd>
<dt id="gcubed.model.Model.energy_usage_efficiency"><code class="name">var <span class="ident">energy_usage_efficiency</span> : <a title="gcubed.baseline.energy_usage_efficiency.EnergyUsageEfficiency" href="baseline/energy_usage_efficiency.html#gcubed.baseline.energy_usage_efficiency.EnergyUsageEfficiency">EnergyUsageEfficiency</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def energy_usage_efficiency(self) -&gt; EnergyUsageEfficiency:
    return self._energy_usage_efficiency</code></pre>
</details>
</dd>
<dt id="gcubed.model.Model.parameters"><code class="name">var <span class="ident">parameters</span> : <a title="gcubed.model_parameters.parameters.Parameters" href="model_parameters/parameters.html#gcubed.model_parameters.parameters.Parameters">Parameters</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def parameters(self) -&gt; Parameters:
    return self._parameters</code></pre>
</details>
</dd>
<dt id="gcubed.model.Model.sym_data"><code class="name">var <span class="ident">sym_data</span> : <a title="gcubed.sym_data.SymData" href="sym_data.html#gcubed.sym_data.SymData">SymData</a></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def sym_data(self) -&gt; SymData:
    return self._sym_data</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="gcubed.model.Model.initialise_properties"><code class="name flex">
<span>def <span class="ident">initialise_properties</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def initialise_properties(self):
    self._configuration: ModelConfiguration = None
    self._sym_data: SymData = None
    self._parameters: Parameters = None
    self._previous_model: Model = None
    self._next_model: Model = None
    self._variables: pd.DataFrame = None
    self._database: pd.DataFrame = None
    self._shock_variables: pd.DataFrame = None
    self._shock_database: pd.DataFrame = None</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="gcubed.base.Base" href="base.html#gcubed.base.Base">Base</a></b></code>:
<ul class="hlist">
<li><code><a title="gcubed.base.Base.get_year_labels" href="base.html#gcubed.base.Base.get_year_labels">get_year_labels</a></code></li>
<li><code><a title="gcubed.base.Base.load_data" href="base.html#gcubed.base.Base.load_data">load_data</a></code></li>
<li><code><a title="gcubed.base.Base.zeros" href="base.html#gcubed.base.Base.zeros">zeros</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="gcubed" href="index.html">gcubed</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="gcubed.model.Model" href="#gcubed.model.Model">Model</a></code></h4>
<ul class="">
<li><code><a title="gcubed.model.Model.configuration" href="#gcubed.model.Model.configuration">configuration</a></code></li>
<li><code><a title="gcubed.model.Model.database" href="#gcubed.model.Model.database">database</a></code></li>
<li><code><a title="gcubed.model.Model.effective_labour_productivity" href="#gcubed.model.Model.effective_labour_productivity">effective_labour_productivity</a></code></li>
<li><code><a title="gcubed.model.Model.energy_usage_efficiency" href="#gcubed.model.Model.energy_usage_efficiency">energy_usage_efficiency</a></code></li>
<li><code><a title="gcubed.model.Model.initialise_properties" href="#gcubed.model.Model.initialise_properties">initialise_properties</a></code></li>
<li><code><a title="gcubed.model.Model.parameters" href="#gcubed.model.Model.parameters">parameters</a></code></li>
<li><code><a title="gcubed.model.Model.sym_data" href="#gcubed.model.Model.sym_data">sym_data</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>