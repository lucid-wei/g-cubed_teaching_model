<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>gcubed.projections.simulation_layer API documentation</title>
<meta name="description" content="Contains the SimulationLayer class, for doing
projections for a single simulation layer." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>gcubed.projections.simulation_layer</code></h1>
</header>
<section id="section-intro">
<p>Contains the SimulationLayer class, for doing
projections for a single simulation layer.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># ------------------------------------------------------------------
# Purpose: Compute and provide access to simulations that overlay
# baseline projections and possibly other simulation layers.
# Author: Geoff Shuetrim
# ------------------------------------------------------------------
&#34;&#34;&#34;
Contains the SimulationLayer class, for doing 
projections for a single simulation layer.
&#34;&#34;&#34;
import logging
import os
import pandas as pd
import numpy as np
from gcubed.constants import Constants
from gcubed.data.database import Database
from gcubed.projections.projections import Projections
from gcubed.projections.baseline_projections import BaselineProjections
from gcubed.projections.simulation_layer_definition import SimulationLayerDefinition

class SimulationLayer(Projections):
    &#34;&#34;&#34;
    TODO: Complete the simulations implementation
    Compute model simulations over the projection horizon.
    &#34;&#34;&#34;

    def __init__(self, simulation_layer_definition: SimulationLayerDefinition, previous_projections: Projections) -&gt; None:
        &#34;&#34;&#34;

        ### Constructor

        Use this constructor for any simulation that is the first simulation layer applied to baseline projections.

        ### Arguments

        simulation_layer_definition: The definition of this simulation layer

        previous_projections: The projections that this simulation layer builds upon, baseline or another type.

        &#34;&#34;&#34;
        assert previous_projections is not None
        self._baseline_projections = previous_projections if isinstance(previous_projections, BaselineProjections) else previous_projections.baseline_projections

        super().__init__(stable_manifold=self.baseline_projections.stable_manifold)
        self._is_baseline_projections = False
        self._previous_projections = previous_projections

        assert simulation_layer_definition is not None
        self._simulation_layer_definition = simulation_layer_definition

        if self.previous_projections is not None:
            assert self.first_projection_year &gt;= self.previous_projections.first_projection_year
        else:
            assert self.first_projection_year &gt;= self.baseline_projections.first_projection_year
        self._first_projection_year = self.definition.event_year

        assert os.path.isfile(self.definition.data_filename)
        self.__load_simulation_data()

        self._generate_projections()

        # Store long rate adjustment constants to use in creating the database projections
        self._long_rate_constants = self.baseline_projections._long_rate_constants
        self._generate_database_projections()

        self._generate_publishable_projections()

        self.__validate()

    def __validate(self):
        &#34;&#34;&#34;
        TODO:  Validate the simulations: 
        &#34;&#34;&#34;
        logging.info(f&#34;The {self.definition.name} projections have been generated.&#34;)

    @property
    def baseline_projections(self) -&gt; BaselineProjections:
        &#34;&#34;&#34;
        The baseline projections.
        &#34;&#34;&#34;
        return self._baseline_projections

    @property
    def definition(self) -&gt; SimulationLayerDefinition:
        &#34;&#34;&#34;
        The definition for this simulation layer, giving access to the information
        about the simulation being done in this layer.
        &#34;&#34;&#34;
        return self._simulation_layer_definition

    @property
    def baseline_projections(self) -&gt; BaselineProjections:
        &#34;&#34;&#34;
        Returns the baseline projections underpinning this simulation
        &#34;&#34;&#34;
        return self._baseline_projections

    @property
    def database(self) -&gt; Database:
        &#34;&#34;&#34;
        Returns the database associated with the baseline projections.
        &#34;&#34;&#34;
        return self.baseline_projections.database

    @property
    def simulation_variables(self) -&gt; pd.DataFrame:
        &#34;&#34;&#34;
        Returns the variable summary information for the simulation data.
        &#34;&#34;&#34;
        return self._simulation_variables

    @property
    def simulation_data(self) -&gt; pd.DataFrame:
        &#34;&#34;&#34;
        Returns the simulation data.
        &#34;&#34;&#34;
        return self._simulation_data

    def __load_simulation_data(self):
        &#34;&#34;&#34;        
        Load and apply the simulation data that affect exogenous variables. 

        Load and apply the simulation data that affect state variables initial values.

        TODO: Check if there are simulations where shocks to state variable initial values are not allowed.

        When a variable has data in the simulation file, load that into the appropriate 
        SYM-specified row of the exogenous variable projections, from the start projection year onwards.

        When a variable has data in the simulation file (control.csv by default), load that into the appropriate 
        SYM-specified row of the state variable projection start year vector and ignore
        data in the control file for all years after that projection start year.

        Adjust the simulation data as follows, depending on the units of the variable:
            gdp - multiply by (projection base year YRATR / 100).
            mmgdp - same as gdp
            btugdp - same as gdp 
            gwhgdp - same as gdp
            usgdp - divide the value in the control file by 100.
            All other units - divide the value in the control file by 100.
        &#34;&#34;&#34;

        # Load the simulation data.
        filename: str = self.definition.data_filename
        assert os.path.isfile(filename)
        (self._simulation_variables, self._simulation_data) = self.load_data(filename)
        if len(self._simulation_variables.index) == 0:
            logging.warn(f&#34;The &#39;{self.definition.name}&#39; simulation layer has no data. This will run but is not doing anything useful.&#34;)
        self._simulation_variables.columns = [&#39;name&#39;]
        self._simulation_variables.index = self._simulation_variables.name
        self._simulation_data = self._simulation_data.astype(float)
        self._simulation_data.index = self._simulation_variables.name

        try:
            self._simulation_data = self._simulation_data.loc[:, self.projection_years_column_labels]
        except:
            raise Exception(f&#34;The simulation data in {self.definition.data_file} should include data values from {self.first_projection_year} to {self.last_projection_year}&#34;)

        # Iterate the shocks, allocating the shocks
        yratr: pd.DataFrame = self.database.get_data(name_regular_expression=f&#34;^{Constants().US_REAL_GDP_RATIO_PREFIX}\(&#34;, years=[self.configuration.original_first_projection_year])
        yratr.index = self.sym_data.regions_members

        self._exo_projections = self.previous_projections.exo_projections_as_dataframe.loc[:, self.projection_years_column_labels]
        
        self._yxr_initial_values: pd.DataFrame = self.previous_projections.yxr_projections_as_dataframe.loc[:, [str(self.first_projection_year)]].copy()

        for variable_name in self._simulation_variables.index:
            variable_region: str = str(self.baseline_projections.database.variables.loc[variable_name, &#39;region&#39;])
            variable_units: str = str(self.sym_data.combined_variable_summary.loc[variable_name, &#39;units&#39;])
            data: pd.DataFrame = self._simulation_data.loc[[variable_name], :] / 100
            vector_name = self.sym_data.projection_vector_for_variable(variable_name=variable_name)
            yratr_for_region: float = float(yratr.loc[variable_region, :].values[0])
            match variable_units:
                case &#39;gdp&#39; | &#39;mmgdp&#39; | &#39;btugdp&#39; | &#39;gwhgdp&#39;:
                    data *= yratr_for_region
                case _:
                    pass

            match vector_name:
                case &#39;exo&#39;:
                    logging.info(f&#34;Augmenting exogenous variables, {variable_name}, from {self.first_projection_year} on.&#34;)
                    self._exo_projections.loc[[variable_name], self.projection_years_column_labels] += data
                    pass

                case &#39;x1l&#39;:
                    logging.info(f&#34;Augmenting initial state variables, {variable_name}, in {self.first_projection_year}&#34;)
                    self._yxr_initial_values.loc[[variable_name], [str(self.first_projection_year)]] += float(data[0])
                    pass

    @property
    def h3t(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        Equivalent to h3t in the Ox implementation
        Functions of current and future exogenous variables affecting J1.
        &#34;&#34;&#34;
        return self._h3t

    @property
    def c4t(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        Equivalent to c4t in the Ox implementation
        Functions of current and future exogenous variables affecting ZE.
        &#34;&#34;&#34;
        return self._c4t


    @property
    def x1_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to X1 to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.x1_constants

    @property
    def j1_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to J1 to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.j1_constants

    @property
    def ze_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to ZE to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.ze_constants

    @property
    def z1_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to Z1 to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.z1_constants</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="gcubed.projections.simulation_layer.SimulationLayer"><code class="flex name class">
<span>class <span class="ident">SimulationLayer</span></span>
<span>(</span><span>simulation_layer_definition: <a title="gcubed.projections.simulation_layer_definition.SimulationLayerDefinition" href="simulation_layer_definition.html#gcubed.projections.simulation_layer_definition.SimulationLayerDefinition">SimulationLayerDefinition</a>, previous_projections: <a title="gcubed.projections.projections.Projections" href="projections.html#gcubed.projections.projections.Projections">Projections</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>TODO: Complete the simulations implementation
Compute model simulations over the projection horizon.</p>
<h3 id="constructor">Constructor</h3>
<p>Use this constructor for any simulation that is the first simulation layer applied to baseline projections.</p>
<h3 id="arguments">Arguments</h3>
<p>simulation_layer_definition: The definition of this simulation layer</p>
<p>previous_projections: The projections that this simulation layer builds upon, baseline or another type.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SimulationLayer(Projections):
    &#34;&#34;&#34;
    TODO: Complete the simulations implementation
    Compute model simulations over the projection horizon.
    &#34;&#34;&#34;

    def __init__(self, simulation_layer_definition: SimulationLayerDefinition, previous_projections: Projections) -&gt; None:
        &#34;&#34;&#34;

        ### Constructor

        Use this constructor for any simulation that is the first simulation layer applied to baseline projections.

        ### Arguments

        simulation_layer_definition: The definition of this simulation layer

        previous_projections: The projections that this simulation layer builds upon, baseline or another type.

        &#34;&#34;&#34;
        assert previous_projections is not None
        self._baseline_projections = previous_projections if isinstance(previous_projections, BaselineProjections) else previous_projections.baseline_projections

        super().__init__(stable_manifold=self.baseline_projections.stable_manifold)
        self._is_baseline_projections = False
        self._previous_projections = previous_projections

        assert simulation_layer_definition is not None
        self._simulation_layer_definition = simulation_layer_definition

        if self.previous_projections is not None:
            assert self.first_projection_year &gt;= self.previous_projections.first_projection_year
        else:
            assert self.first_projection_year &gt;= self.baseline_projections.first_projection_year
        self._first_projection_year = self.definition.event_year

        assert os.path.isfile(self.definition.data_filename)
        self.__load_simulation_data()

        self._generate_projections()

        # Store long rate adjustment constants to use in creating the database projections
        self._long_rate_constants = self.baseline_projections._long_rate_constants
        self._generate_database_projections()

        self._generate_publishable_projections()

        self.__validate()

    def __validate(self):
        &#34;&#34;&#34;
        TODO:  Validate the simulations: 
        &#34;&#34;&#34;
        logging.info(f&#34;The {self.definition.name} projections have been generated.&#34;)

    @property
    def baseline_projections(self) -&gt; BaselineProjections:
        &#34;&#34;&#34;
        The baseline projections.
        &#34;&#34;&#34;
        return self._baseline_projections

    @property
    def definition(self) -&gt; SimulationLayerDefinition:
        &#34;&#34;&#34;
        The definition for this simulation layer, giving access to the information
        about the simulation being done in this layer.
        &#34;&#34;&#34;
        return self._simulation_layer_definition

    @property
    def baseline_projections(self) -&gt; BaselineProjections:
        &#34;&#34;&#34;
        Returns the baseline projections underpinning this simulation
        &#34;&#34;&#34;
        return self._baseline_projections

    @property
    def database(self) -&gt; Database:
        &#34;&#34;&#34;
        Returns the database associated with the baseline projections.
        &#34;&#34;&#34;
        return self.baseline_projections.database

    @property
    def simulation_variables(self) -&gt; pd.DataFrame:
        &#34;&#34;&#34;
        Returns the variable summary information for the simulation data.
        &#34;&#34;&#34;
        return self._simulation_variables

    @property
    def simulation_data(self) -&gt; pd.DataFrame:
        &#34;&#34;&#34;
        Returns the simulation data.
        &#34;&#34;&#34;
        return self._simulation_data

    def __load_simulation_data(self):
        &#34;&#34;&#34;        
        Load and apply the simulation data that affect exogenous variables. 

        Load and apply the simulation data that affect state variables initial values.

        TODO: Check if there are simulations where shocks to state variable initial values are not allowed.

        When a variable has data in the simulation file, load that into the appropriate 
        SYM-specified row of the exogenous variable projections, from the start projection year onwards.

        When a variable has data in the simulation file (control.csv by default), load that into the appropriate 
        SYM-specified row of the state variable projection start year vector and ignore
        data in the control file for all years after that projection start year.

        Adjust the simulation data as follows, depending on the units of the variable:
            gdp - multiply by (projection base year YRATR / 100).
            mmgdp - same as gdp
            btugdp - same as gdp 
            gwhgdp - same as gdp
            usgdp - divide the value in the control file by 100.
            All other units - divide the value in the control file by 100.
        &#34;&#34;&#34;

        # Load the simulation data.
        filename: str = self.definition.data_filename
        assert os.path.isfile(filename)
        (self._simulation_variables, self._simulation_data) = self.load_data(filename)
        if len(self._simulation_variables.index) == 0:
            logging.warn(f&#34;The &#39;{self.definition.name}&#39; simulation layer has no data. This will run but is not doing anything useful.&#34;)
        self._simulation_variables.columns = [&#39;name&#39;]
        self._simulation_variables.index = self._simulation_variables.name
        self._simulation_data = self._simulation_data.astype(float)
        self._simulation_data.index = self._simulation_variables.name

        try:
            self._simulation_data = self._simulation_data.loc[:, self.projection_years_column_labels]
        except:
            raise Exception(f&#34;The simulation data in {self.definition.data_file} should include data values from {self.first_projection_year} to {self.last_projection_year}&#34;)

        # Iterate the shocks, allocating the shocks
        yratr: pd.DataFrame = self.database.get_data(name_regular_expression=f&#34;^{Constants().US_REAL_GDP_RATIO_PREFIX}\(&#34;, years=[self.configuration.original_first_projection_year])
        yratr.index = self.sym_data.regions_members

        self._exo_projections = self.previous_projections.exo_projections_as_dataframe.loc[:, self.projection_years_column_labels]
        
        self._yxr_initial_values: pd.DataFrame = self.previous_projections.yxr_projections_as_dataframe.loc[:, [str(self.first_projection_year)]].copy()

        for variable_name in self._simulation_variables.index:
            variable_region: str = str(self.baseline_projections.database.variables.loc[variable_name, &#39;region&#39;])
            variable_units: str = str(self.sym_data.combined_variable_summary.loc[variable_name, &#39;units&#39;])
            data: pd.DataFrame = self._simulation_data.loc[[variable_name], :] / 100
            vector_name = self.sym_data.projection_vector_for_variable(variable_name=variable_name)
            yratr_for_region: float = float(yratr.loc[variable_region, :].values[0])
            match variable_units:
                case &#39;gdp&#39; | &#39;mmgdp&#39; | &#39;btugdp&#39; | &#39;gwhgdp&#39;:
                    data *= yratr_for_region
                case _:
                    pass

            match vector_name:
                case &#39;exo&#39;:
                    logging.info(f&#34;Augmenting exogenous variables, {variable_name}, from {self.first_projection_year} on.&#34;)
                    self._exo_projections.loc[[variable_name], self.projection_years_column_labels] += data
                    pass

                case &#39;x1l&#39;:
                    logging.info(f&#34;Augmenting initial state variables, {variable_name}, in {self.first_projection_year}&#34;)
                    self._yxr_initial_values.loc[[variable_name], [str(self.first_projection_year)]] += float(data[0])
                    pass

    @property
    def h3t(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        Equivalent to h3t in the Ox implementation
        Functions of current and future exogenous variables affecting J1.
        &#34;&#34;&#34;
        return self._h3t

    @property
    def c4t(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        Equivalent to c4t in the Ox implementation
        Functions of current and future exogenous variables affecting ZE.
        &#34;&#34;&#34;
        return self._c4t


    @property
    def x1_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to X1 to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.x1_constants

    @property
    def j1_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to J1 to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.j1_constants

    @property
    def ze_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to ZE to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.ze_constants

    @property
    def z1_constants(self) -&gt; np.ndarray:
        &#34;&#34;&#34;
        The constant adjustments to Z1 to ensure projections equal observed values
        in the original base projection year.
        &#34;&#34;&#34;
        return self.baseline_projections.z1_constants</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="gcubed.projections.projections.Projections" href="projections.html#gcubed.projections.projections.Projections">Projections</a></li>
<li><a title="gcubed.base.Base" href="../base.html#gcubed.base.Base">Base</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.baseline_projections"><code class="name">var <span class="ident">baseline_projections</span> : <a title="gcubed.projections.baseline_projections.BaselineProjections" href="baseline_projections.html#gcubed.projections.baseline_projections.BaselineProjections">BaselineProjections</a></code></dt>
<dd>
<div class="desc"><p>Returns the baseline projections underpinning this simulation</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def baseline_projections(self) -&gt; BaselineProjections:
    &#34;&#34;&#34;
    Returns the baseline projections underpinning this simulation
    &#34;&#34;&#34;
    return self._baseline_projections</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.c4t"><code class="name">var <span class="ident">c4t</span> : numpy.ndarray</code></dt>
<dd>
<div class="desc"><p>Equivalent to c4t in the Ox implementation
Functions of current and future exogenous variables affecting ZE.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def c4t(self) -&gt; np.ndarray:
    &#34;&#34;&#34;
    Equivalent to c4t in the Ox implementation
    Functions of current and future exogenous variables affecting ZE.
    &#34;&#34;&#34;
    return self._c4t</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.database"><code class="name">var <span class="ident">database</span> : <a title="gcubed.data.database.Database" href="../data/database.html#gcubed.data.database.Database">Database</a></code></dt>
<dd>
<div class="desc"><p>Returns the database associated with the baseline projections.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def database(self) -&gt; Database:
    &#34;&#34;&#34;
    Returns the database associated with the baseline projections.
    &#34;&#34;&#34;
    return self.baseline_projections.database</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.definition"><code class="name">var <span class="ident">definition</span> : <a title="gcubed.projections.simulation_layer_definition.SimulationLayerDefinition" href="simulation_layer_definition.html#gcubed.projections.simulation_layer_definition.SimulationLayerDefinition">SimulationLayerDefinition</a></code></dt>
<dd>
<div class="desc"><p>The definition for this simulation layer, giving access to the information
about the simulation being done in this layer.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def definition(self) -&gt; SimulationLayerDefinition:
    &#34;&#34;&#34;
    The definition for this simulation layer, giving access to the information
    about the simulation being done in this layer.
    &#34;&#34;&#34;
    return self._simulation_layer_definition</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.h3t"><code class="name">var <span class="ident">h3t</span> : numpy.ndarray</code></dt>
<dd>
<div class="desc"><p>Equivalent to h3t in the Ox implementation
Functions of current and future exogenous variables affecting J1.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def h3t(self) -&gt; np.ndarray:
    &#34;&#34;&#34;
    Equivalent to h3t in the Ox implementation
    Functions of current and future exogenous variables affecting J1.
    &#34;&#34;&#34;
    return self._h3t</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.j1_constants"><code class="name">var <span class="ident">j1_constants</span> : numpy.ndarray</code></dt>
<dd>
<div class="desc"><p>The constant adjustments to J1 to ensure projections equal observed values
in the original base projection year.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def j1_constants(self) -&gt; np.ndarray:
    &#34;&#34;&#34;
    The constant adjustments to J1 to ensure projections equal observed values
    in the original base projection year.
    &#34;&#34;&#34;
    return self.baseline_projections.j1_constants</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.simulation_data"><code class="name">var <span class="ident">simulation_data</span> : pandas.core.frame.DataFrame</code></dt>
<dd>
<div class="desc"><p>Returns the simulation data.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def simulation_data(self) -&gt; pd.DataFrame:
    &#34;&#34;&#34;
    Returns the simulation data.
    &#34;&#34;&#34;
    return self._simulation_data</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.simulation_variables"><code class="name">var <span class="ident">simulation_variables</span> : pandas.core.frame.DataFrame</code></dt>
<dd>
<div class="desc"><p>Returns the variable summary information for the simulation data.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def simulation_variables(self) -&gt; pd.DataFrame:
    &#34;&#34;&#34;
    Returns the variable summary information for the simulation data.
    &#34;&#34;&#34;
    return self._simulation_variables</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.x1_constants"><code class="name">var <span class="ident">x1_constants</span> : numpy.ndarray</code></dt>
<dd>
<div class="desc"><p>The constant adjustments to X1 to ensure projections equal observed values
in the original base projection year.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def x1_constants(self) -&gt; np.ndarray:
    &#34;&#34;&#34;
    The constant adjustments to X1 to ensure projections equal observed values
    in the original base projection year.
    &#34;&#34;&#34;
    return self.baseline_projections.x1_constants</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.z1_constants"><code class="name">var <span class="ident">z1_constants</span> : numpy.ndarray</code></dt>
<dd>
<div class="desc"><p>The constant adjustments to Z1 to ensure projections equal observed values
in the original base projection year.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def z1_constants(self) -&gt; np.ndarray:
    &#34;&#34;&#34;
    The constant adjustments to Z1 to ensure projections equal observed values
    in the original base projection year.
    &#34;&#34;&#34;
    return self.baseline_projections.z1_constants</code></pre>
</details>
</dd>
<dt id="gcubed.projections.simulation_layer.SimulationLayer.ze_constants"><code class="name">var <span class="ident">ze_constants</span> : numpy.ndarray</code></dt>
<dd>
<div class="desc"><p>The constant adjustments to ZE to ensure projections equal observed values
in the original base projection year.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def ze_constants(self) -&gt; np.ndarray:
    &#34;&#34;&#34;
    The constant adjustments to ZE to ensure projections equal observed values
    in the original base projection year.
    &#34;&#34;&#34;
    return self.baseline_projections.ze_constants</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="gcubed.projections.projections.Projections" href="projections.html#gcubed.projections.projections.Projections">Projections</a></b></code>:
<ul class="hlist">
<li><code><a title="gcubed.projections.projections.Projections.configuration" href="projections.html#gcubed.projections.projections.Projections.configuration">configuration</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.database_projections" href="projections.html#gcubed.projections.projections.Projections.database_projections">database_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.exo_projections" href="projections.html#gcubed.projections.projections.Projections.exo_projections">exo_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.exo_projections_as_dataframe" href="projections.html#gcubed.projections.projections.Projections.exo_projections_as_dataframe">exo_projections_as_dataframe</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.exz_projections" href="projections.html#gcubed.projections.projections.Projections.exz_projections">exz_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.exz_projections_as_dataframe" href="projections.html#gcubed.projections.projections.Projections.exz_projections_as_dataframe">exz_projections_as_dataframe</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.first_projection_year" href="projections.html#gcubed.projections.projections.Projections.first_projection_year">first_projection_year</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.get_differences_between_projections" href="projections.html#gcubed.projections.projections.Projections.get_differences_between_projections">get_differences_between_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.get_year_labels" href="../base.html#gcubed.base.Base.get_year_labels">get_year_labels</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.graphable_projections" href="projections.html#gcubed.projections.projections.Projections.graphable_projections">graphable_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.is_baseline_projections" href="projections.html#gcubed.projections.projections.Projections.is_baseline_projections">is_baseline_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.last_projection_year" href="projections.html#gcubed.projections.projections.Projections.last_projection_year">last_projection_year</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.load_data" href="../base.html#gcubed.base.Base.load_data">load_data</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.long_rate_constants" href="projections.html#gcubed.projections.projections.Projections.long_rate_constants">long_rate_constants</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.model" href="projections.html#gcubed.projections.projections.Projections.model">model</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.parameters" href="projections.html#gcubed.projections.projections.Projections.parameters">parameters</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.previous_projections" href="projections.html#gcubed.projections.projections.Projections.previous_projections">previous_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.projection_years" href="projections.html#gcubed.projections.projections.Projections.projection_years">projection_years</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.projection_years_column_labels" href="projections.html#gcubed.projections.projections.Projections.projection_years_column_labels">projection_years_column_labels</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.projections" href="projections.html#gcubed.projections.projections.Projections.projections">projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.publishable_projections" href="projections.html#gcubed.projections.projections.Projections.publishable_projections">publishable_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.stable_manifold" href="projections.html#gcubed.projections.projections.Projections.stable_manifold">stable_manifold</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.state_space_form" href="projections.html#gcubed.projections.projections.Projections.state_space_form">state_space_form</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.sym_data" href="projections.html#gcubed.projections.projections.Projections.sym_data">sym_data</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.yjr_projections" href="projections.html#gcubed.projections.projections.Projections.yjr_projections">yjr_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.yjr_projections_as_dataframe" href="projections.html#gcubed.projections.projections.Projections.yjr_projections_as_dataframe">yjr_projections_as_dataframe</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.yxr_initial_values" href="projections.html#gcubed.projections.projections.Projections.yxr_initial_values">yxr_initial_values</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.yxr_projections" href="projections.html#gcubed.projections.projections.Projections.yxr_projections">yxr_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.yxr_projections_as_dataframe" href="projections.html#gcubed.projections.projections.Projections.yxr_projections_as_dataframe">yxr_projections_as_dataframe</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.z1l_projections" href="projections.html#gcubed.projections.projections.Projections.z1l_projections">z1l_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.z1l_projections_as_dataframe" href="projections.html#gcubed.projections.projections.Projections.z1l_projections_as_dataframe">z1l_projections_as_dataframe</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.zel_projections" href="projections.html#gcubed.projections.projections.Projections.zel_projections">zel_projections</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.zel_projections_as_dataframe" href="projections.html#gcubed.projections.projections.Projections.zel_projections_as_dataframe">zel_projections_as_dataframe</a></code></li>
<li><code><a title="gcubed.projections.projections.Projections.zeros" href="../base.html#gcubed.base.Base.zeros">zeros</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="gcubed.projections" href="index.html">gcubed.projections</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="gcubed.projections.simulation_layer.SimulationLayer" href="#gcubed.projections.simulation_layer.SimulationLayer">SimulationLayer</a></code></h4>
<ul class="">
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.baseline_projections" href="#gcubed.projections.simulation_layer.SimulationLayer.baseline_projections">baseline_projections</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.c4t" href="#gcubed.projections.simulation_layer.SimulationLayer.c4t">c4t</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.database" href="#gcubed.projections.simulation_layer.SimulationLayer.database">database</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.definition" href="#gcubed.projections.simulation_layer.SimulationLayer.definition">definition</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.h3t" href="#gcubed.projections.simulation_layer.SimulationLayer.h3t">h3t</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.j1_constants" href="#gcubed.projections.simulation_layer.SimulationLayer.j1_constants">j1_constants</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.simulation_data" href="#gcubed.projections.simulation_layer.SimulationLayer.simulation_data">simulation_data</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.simulation_variables" href="#gcubed.projections.simulation_layer.SimulationLayer.simulation_variables">simulation_variables</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.x1_constants" href="#gcubed.projections.simulation_layer.SimulationLayer.x1_constants">x1_constants</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.z1_constants" href="#gcubed.projections.simulation_layer.SimulationLayer.z1_constants">z1_constants</a></code></li>
<li><code><a title="gcubed.projections.simulation_layer.SimulationLayer.ze_constants" href="#gcubed.projections.simulation_layer.SimulationLayer.ze_constants">ze_constants</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>